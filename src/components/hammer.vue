<template>
    <div ref="cursor" :class="['hammer', { down: hammer.down }]">
        <transition name="fade">
            <svg v-if="hammer.show"  viewBox="0 0 128 128" xmlns="http://www.w3.org/2000/svg" fill-rule="evenodd" clip-rule="evenodd" stroke-linejoin="round" stroke-miterlimit="2"><path d="M61.361 33.368l16.37 21.165-13.643 10.551-16.37-21.165 13.643-10.551z" fill="#717f88" fill-rule="nonzero"/><path d="M52.994 39.841l16.37 21.165-5.275 4.08L47.72 43.92l5.274-4.079z" fill="#5d6970" fill-rule="nonzero"/><path d="M76.876 48.889l45.396 58.696c3.901 5.045 2.901 12.355-2.263 16.158-5.013 3.69-12.095 2.548-15.903-2.377L58.84 62.838a1.937 1.937 0 01.347-2.718l14.97-11.578a1.937 1.937 0 012.719.347z" fill="#b58058" fill-rule="nonzero"/><path d="M109.143 117.47L63.877 58.941a1.938 1.938 0 01.348-2.718l-5.038 3.896a1.938 1.938 0 00-.347 2.718l45.266 58.528c3.808 4.925 10.89 6.067 15.903 2.377a11.38 11.38 0 002.47-2.484c-4.647 1.808-10.142.34-13.336-3.79z" fill="#8e6047" fill-rule="nonzero"/><path d="M98.182 9.221C86.498 12.717 72.57 22.479 66.966 29.836l-3.768-4.872-.665-.862-7.47-9.668.006-.005c2.126-1.647 4.254-3.293 6.383-4.936C71.948 1.375 87.026.596 98.182 9.22z" fill="#717f88" fill-rule="nonzero"/><path d="M98.182 9.221C86.498 12.717 72.57 22.479 66.966 29.836l-3.768-4.872-.665-.862c.711-1.132 1.16-1.85 1.251-1.993C70.85 10.877 84.738 4.96 98.182 9.221zM29.106 29.184l17.211 22.253-.546.63c-2.535-1.694-6.452-1.357-9.563 1.05-3.093 2.392-4.407 6.068-3.435 8.94l-.311.096L15.25 39.9l.188-.302c2.536 1.615 6.383 1.254 9.448-1.117 3.117-2.41 4.43-6.13 3.415-9.01l.804-.287z" fill="#5d6970" fill-rule="nonzero"/><path d="M15.44 39.598l-.189.302 17.211 22.253.312-.096c.186.557.46 1.08.814 1.55l-11.581 8.957L2.48 47.316l11.58-8.957c.385.49.852.909 1.38 1.24z" fill="#717f88" fill-rule="nonzero"/><path d="M28.434 56.4l-.241.233 5.063 6.547.262-.16c-.052.244-.03.443.069.588l-11.58 8.956-5.745-7.427 11.58-8.957c.119.143.32.215.592.22z" fill="#5d6970" fill-rule="nonzero"/><path d="M48.062 12.062a4.09 4.09 0 015.74.736l1.262 1.634 8.133 10.532 5.117 6.615a4.09 4.09 0 01-.733 5.738L65.6 38.849l-.002-.003-13.643 10.552.002.002-4.935 3.817a5.527 5.527 0 00-1.252-1.15l.547-.63-17.211-22.253-.804.287a5.49 5.49 0 00-.807-1.502l20.567-15.907z" fill="#717f88" fill-rule="nonzero"/><path d="M123.843 106.37l-45.397-58.7a3.939 3.939 0 00-4.49-1.266l-5.57-7.2.3-.23c1.205-.933 2.078-2.254 2.361-3.75a6.044 6.044 0 00-1.162-4.86l-.387-.5a38.244 38.244 0 012.368-2.51 1.985 1.985 0 00.094-2.758l-.007-.008a1.98 1.98 0 00-2.848-.092 44.468 44.468 0 00-2.082 2.164l-9.172-11.871c2.82-2.183 4.585-3.548 4.816-3.724C71.817 3.988 84.11 3.17 93.76 8.656c-5.629 2.207-11.806 5.661-17.36 9.732a1.979 1.979 0 00-.389 2.804l.008.01a1.982 1.982 0 002.743.381c6.475-4.747 13.801-8.596 19.925-10.439.575-.173 1.07-.566 1.312-1.115a1.994 1.994 0 00-.6-2.38c-11.428-8.835-27.531-8.723-39.153.265-.229.175-1.999 1.544-4.824 3.73l-.049-.063a6.079 6.079 0 00-4.037-2.311 6.04 6.04 0 00-4.488 1.22L26.28 26.398c-.865.669-1.01 1.912-.356 2.788.216.288.385.607.504.946.746 2.116-.414 4.966-2.756 6.778-2.329 1.8-5.275 2.218-7.177 1.007a3.452 3.452 0 01-.858-.765c-.687-.856-1.925-1.035-2.793-.363l-11.58 8.956a1.987 1.987 0 00-.356 2.787l19.498 25.211c.17.22.373.414.615.549.726.406 1.585.32 2.2-.156l11.582-8.957c.852-.66 1.02-1.9.374-2.762a3.523 3.523 0 01-.522-.997c-.725-2.142.413-4.91 2.768-6.731 2.335-1.807 5.382-2.214 7.244-.97.304.204.575.453.804.739.673.841 1.914.99 2.767.33l3.363-2.6 5.567 7.196a3.904 3.904 0 00-.689 1.771 3.9 3.9 0 00.79 2.9l26.116 33.768a1.987 1.987 0 003.143-2.43L60.44 61.66l14.895-11.52L120.7 108.8a9.337 9.337 0 011.872 7.061 9.347 9.347 0 01-3.74 6.282c-4.081 3.004-9.982 2.11-13.155-1.992l-13.482-17.432a1.987 1.987 0 00-3.143 2.43l13.482 17.433a13.682 13.682 0 009.102 5.193c3.295.42 6.727-.353 9.55-2.432a13.285 13.285 0 005.321-8.932 13.278 13.278 0 00-2.664-10.042zM22.363 69.776L5.265 47.672l8.438-6.526L30.8 63.251l-8.438 6.526zm12.63-18.232c-1.912 1.478-3.284 3.428-3.984 5.481L19.814 42.552c2.147-.163 4.359-1.007 6.29-2.5 2.108-1.63 3.558-3.824 4.179-6.099l11.665 15.083c-2.36.028-4.85.88-6.956 2.51zm12.805-1.44L30.702 28l18.576-14.367c.44-.343 1-.495 1.553-.422h.001a2.09 2.09 0 011.398.8l1.26 1.635h.001l13.251 17.149c.343.44.495 1 .423 1.553a2.089 2.089 0 01-.8 1.397l-18.567 14.36zm17.446-8.47l5.462 7.062-10.5 8.121-5.462-7.062 10.5-8.12z" fill-rule="nonzero"/></svg>
        </transition>
    </div>
</template>

<script>
export default {
    data: () => ({
        hammer: {
            show: true,
            down: false,
        },
    }),
    mounted() {
        const gameContainer = this.$refs.cursor.parentNode;

        window.addEventListener('mousedown', e => {
            this.hammer.down = true;
        });
        window.addEventListener('mouseup', e => {
            this.hammer.down = false;
        });
        
        gameContainer.addEventListener('mouseenter', e => {
            this.hammer.show = true;
            window.addEventListener("mousemove", this.moveHammer)
        });
        gameContainer.addEventListener('mouseleave', e => {
            this.hammer.show = false;
            window.removeEventListener('mousemove', this.moveHammer);
        });
    },
    methods: {
        moveHammer(event) {
            let currentCursorPos;
            const cursorEl = this.$refs.cursor;

            currentCursorPos = { x: event.clientX, y: event.clientY };

            if (cursorEl) {
                cursorEl.style.transform = `translate(${currentCursorPos.x - 45}px, ${currentCursorPos.y - 55}px)`;
            }
        }
    }
}
</script>

<style lang="scss">
.hammer {
    position: fixed;
    height: 100px;
    width: 100px;
    pointer-events: none;
    &.down svg {
        transform: rotate(-40deg);
    }
    svg {
        transition: transform 50ms; 
    }
}

.fade-enter-active, .fade-leave-active {
  transition: opacity 150ms, transform 100ms;
}
.fade-enter, .fade-leave-to {
  opacity: 0;
  transform: scale(0);
}
</style>